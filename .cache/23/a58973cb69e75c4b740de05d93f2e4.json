{"id":"QdeU","dependencies":[{"name":"/Users/danmac2/Developer/WebDev/FirebaseRecipeApp/package.json","includedInParent":true,"mtime":1571483685000},{"name":"moment","loc":{"line":1,"column":23},"parent":"/Users/danmac2/Developer/WebDev/FirebaseRecipeApp/js/app.js","resolved":"/Users/danmac2/Developer/WebDev/FirebaseRecipeApp/node_modules/moment/moment.js"}],"generated":{"js":"var e=require(\"moment\"),t=document.querySelector(\"ul\"),n=document.querySelector(\"form\"),o=document.querySelector(\".stop-live\"),c=function(n,o){var c=e(n.created_at.toDate()).format(\"MMMM Do YYYY, h:mm:ss a\"),a='\\n        <li data-id=\"'.concat(o,'\">\\n            <div>\\n                ').concat(n.title,\"\\n            </div>\\n            <div>Created on \").concat(c,'</div>\\n            <button class=\"btn btn-danger btn-sm my-2\">Delete Item</button>\\n        </li>\\n    ');t.innerHTML+=a},a=function(e){document.querySelectorAll(\"li\").forEach(function(t){t.getAttribute(\"data-id\")===e&&t.remove()})},i=db.collection(\"recipes\").onSnapshot(function(e){console.log(e.docChanges()),e.docChanges().forEach(function(e){var t=e.doc;console.log(t),\"added\"===e.type?c(t.data(),t.id):\"removed\"===e.type&&a(t.id)})});n.addEventListener(\"submit\",function(e){e.preventDefault();var t=new Date,o={title:n.recipe.value,created_at:firebase.firestore.Timestamp.fromDate(t)};db.collection(\"recipes\").add(o).then(function(){console.log(\"recipe added\")}).catch(function(e){console.log(e)})}),t.addEventListener(\"click\",function(e){if(console.log(e),\"BUTTON\"===e.target.tagName){var t=e.target.parentElement.getAttribute(\"data-id\");console.log(t),db.collection(\"recipes\").doc(t).delete().then(function(){console.log(\"recipe delete\")})}}),o.addEventListener(\"click\",function(){i(),console.log(\"stop successful\")});"},"sourceMaps":{"js":{"mappings":[{"source":"js/app.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"js/app.js","name":"moment","original":{"line":1,"column":6},"generated":{"line":1,"column":4}},{"source":"js/app.js","name":"require","original":{"line":1,"column":15},"generated":{"line":1,"column":6}},{"source":"js/app.js","original":{"line":1,"column":23},"generated":{"line":1,"column":14}},{"source":"js/app.js","name":"list","original":{"line":3,"column":6},"generated":{"line":1,"column":24}},{"source":"js/app.js","name":"document","original":{"line":3,"column":13},"generated":{"line":1,"column":26}},{"source":"js/app.js","name":"querySelector","original":{"line":3,"column":22},"generated":{"line":1,"column":35}},{"source":"js/app.js","original":{"line":3,"column":0},"generated":{"line":1,"column":49}},{"source":"js/app.js","name":"form","original":{"line":4,"column":6},"generated":{"line":1,"column":55}},{"source":"js/app.js","name":"document","original":{"line":4,"column":13},"generated":{"line":1,"column":57}},{"source":"js/app.js","name":"querySelector","original":{"line":4,"column":22},"generated":{"line":1,"column":66}},{"source":"js/app.js","original":{"line":4,"column":0},"generated":{"line":1,"column":80}},{"source":"js/app.js","name":"stopButton","original":{"line":5,"column":6},"generated":{"line":1,"column":88}},{"source":"js/app.js","name":"document","original":{"line":5,"column":19},"generated":{"line":1,"column":90}},{"source":"js/app.js","name":"querySelector","original":{"line":5,"column":28},"generated":{"line":1,"column":99}},{"source":"js/app.js","original":{"line":5,"column":0},"generated":{"line":1,"column":113}},{"source":"js/app.js","name":"addRecipe","original":{"line":7,"column":6},"generated":{"line":1,"column":127}},{"source":"js/app.js","original":{"line":7,"column":18},"generated":{"line":1,"column":129}},{"source":"js/app.js","name":"recipe","original":{"line":7,"column":19},"generated":{"line":1,"column":138}},{"source":"js/app.js","name":"id","original":{"line":7,"column":27},"generated":{"line":1,"column":140}},{"source":"js/app.js","name":"time","original":{"line":8,"column":8},"generated":{"line":1,"column":143}},{"source":"js/app.js","name":"time","original":{"line":8,"column":8},"generated":{"line":1,"column":147}},{"source":"js/app.js","name":"moment","original":{"line":8,"column":15},"generated":{"line":1,"column":149}},{"source":"js/app.js","name":"recipe","original":{"line":8,"column":22},"generated":{"line":1,"column":151}},{"source":"js/app.js","name":"created_at","original":{"line":8,"column":29},"generated":{"line":1,"column":153}},{"source":"js/app.js","name":"toDate","original":{"line":8,"column":40},"generated":{"line":1,"column":164}},{"source":"js/app.js","name":"format","original":{"line":8,"column":50},"generated":{"line":1,"column":174}},{"source":"js/app.js","original":{"line":8,"column":57},"generated":{"line":1,"column":181}},{"source":"js/app.js","name":"html","original":{"line":9,"column":8},"generated":{"line":1,"column":208}},{"source":"js/app.js","name":"id","original":{"line":10,"column":23},"generated":{"line":1,"column":210}},{"source":"js/app.js","name":"id","original":{"line":10,"column":23},"generated":{"line":1,"column":236}},{"source":"js/app.js","name":"id","original":{"line":10,"column":23},"generated":{"line":1,"column":243}},{"source":"js/app.js","name":"recipe","original":{"line":12,"column":18},"generated":{"line":1,"column":245}},{"source":"js/app.js","name":"recipe","original":{"line":12,"column":18},"generated":{"line":1,"column":288}},{"source":"js/app.js","name":"recipe","original":{"line":12,"column":18},"generated":{"line":1,"column":295}},{"source":"js/app.js","name":"title","original":{"line":12,"column":25},"generated":{"line":1,"column":297}},{"source":"js/app.js","name":"time","original":{"line":14,"column":30},"generated":{"line":1,"column":303}},{"source":"js/app.js","name":"time","original":{"line":14,"column":30},"generated":{"line":1,"column":357}},{"source":"js/app.js","name":"time","original":{"line":14,"column":30},"generated":{"line":1,"column":364}},{"source":"js/app.js","original":{"line":9,"column":4},"generated":{"line":1,"column":366}},{"source":"js/app.js","name":"list","original":{"line":19,"column":4},"generated":{"line":1,"column":474}},{"source":"js/app.js","name":"innerHTML","original":{"line":19,"column":9},"generated":{"line":1,"column":476}},{"source":"js/app.js","name":"html","original":{"line":19,"column":22},"generated":{"line":1,"column":487}},{"source":"js/app.js","name":"deleteRecipe","original":{"line":23,"column":6},"generated":{"line":1,"column":490}},{"source":"js/app.js","original":{"line":23,"column":21},"generated":{"line":1,"column":492}},{"source":"js/app.js","name":"id","original":{"line":23,"column":22},"generated":{"line":1,"column":501}},{"source":"js/app.js","name":"document","original":{"line":24,"column":20},"generated":{"line":1,"column":504}},{"source":"js/app.js","name":"querySelectorAll","original":{"line":24,"column":29},"generated":{"line":1,"column":513}},{"source":"js/app.js","original":{"line":24,"column":4},"generated":{"line":1,"column":530}},{"source":"js/app.js","name":"forEach","original":{"line":25,"column":12},"generated":{"line":1,"column":536}},{"source":"js/app.js","original":{"line":25,"column":20},"generated":{"line":1,"column":544}},{"source":"js/app.js","name":"recipe","original":{"line":25,"column":20},"generated":{"line":1,"column":553}},{"source":"js/app.js","name":"recipe","original":{"line":26,"column":12},"generated":{"line":1,"column":556}},{"source":"js/app.js","name":"getAttribute","original":{"line":26,"column":19},"generated":{"line":1,"column":558}},{"source":"js/app.js","name":"id","original":{"line":26,"column":47},"generated":{"line":1,"column":571}},{"source":"js/app.js","name":"id","original":{"line":26,"column":47},"generated":{"line":1,"column":584}},{"source":"js/app.js","name":"recipe","original":{"line":27,"column":12},"generated":{"line":1,"column":587}},{"source":"js/app.js","name":"remove","original":{"line":27,"column":19},"generated":{"line":1,"column":589}},{"source":"js/app.js","name":"stopLive","original":{"line":34,"column":6},"generated":{"line":1,"column":601}},{"source":"js/app.js","name":"db","original":{"line":34,"column":17},"generated":{"line":1,"column":603}},{"source":"js/app.js","name":"collection","original":{"line":34,"column":20},"generated":{"line":1,"column":606}},{"source":"js/app.js","name":"onSnapshot","original":{"line":34,"column":42},"generated":{"line":1,"column":617}},{"source":"js/app.js","name":"onSnapshot","original":{"line":34,"column":42},"generated":{"line":1,"column":628}},{"source":"js/app.js","original":{"line":34,"column":53},"generated":{"line":1,"column":639}},{"source":"js/app.js","name":"snapshot","original":{"line":34,"column":53},"generated":{"line":1,"column":648}},{"source":"js/app.js","name":"console","original":{"line":35,"column":4},"generated":{"line":1,"column":651}},{"source":"js/app.js","name":"log","original":{"line":35,"column":12},"generated":{"line":1,"column":659}},{"source":"js/app.js","name":"snapshot","original":{"line":35,"column":16},"generated":{"line":1,"column":663}},{"source":"js/app.js","name":"docChanges","original":{"line":35,"column":25},"generated":{"line":1,"column":665}},{"source":"js/app.js","name":"snapshot","original":{"line":36,"column":4},"generated":{"line":1,"column":679}},{"source":"js/app.js","name":"docChanges","original":{"line":36,"column":13},"generated":{"line":1,"column":681}},{"source":"js/app.js","name":"forEach","original":{"line":36,"column":26},"generated":{"line":1,"column":694}},{"source":"js/app.js","original":{"line":36,"column":34},"generated":{"line":1,"column":702}},{"source":"js/app.js","name":"change","original":{"line":36,"column":34},"generated":{"line":1,"column":711}},{"source":"js/app.js","name":"doc","original":{"line":37,"column":14},"generated":{"line":1,"column":714}},{"source":"js/app.js","name":"doc","original":{"line":37,"column":14},"generated":{"line":1,"column":718}},{"source":"js/app.js","name":"change","original":{"line":37,"column":20},"generated":{"line":1,"column":720}},{"source":"js/app.js","name":"doc","original":{"line":37,"column":27},"generated":{"line":1,"column":722}},{"source":"js/app.js","name":"console","original":{"line":38,"column":8},"generated":{"line":1,"column":726}},{"source":"js/app.js","name":"log","original":{"line":38,"column":16},"generated":{"line":1,"column":734}},{"source":"js/app.js","name":"doc","original":{"line":38,"column":20},"generated":{"line":1,"column":738}},{"source":"js/app.js","original":{"line":39,"column":8},"generated":{"line":1,"column":741}},{"source":"js/app.js","name":"change","original":{"line":39,"column":12},"generated":{"line":1,"column":751}},{"source":"js/app.js","name":"type","original":{"line":39,"column":19},"generated":{"line":1,"column":753}},{"source":"js/app.js","name":"addRecipe","original":{"line":40,"column":12},"generated":{"line":1,"column":758}},{"source":"js/app.js","name":"doc","original":{"line":40,"column":22},"generated":{"line":1,"column":760}},{"source":"js/app.js","name":"data","original":{"line":40,"column":26},"generated":{"line":1,"column":762}},{"source":"js/app.js","name":"doc","original":{"line":40,"column":34},"generated":{"line":1,"column":769}},{"source":"js/app.js","name":"id","original":{"line":40,"column":38},"generated":{"line":1,"column":771}},{"source":"js/app.js","original":{"line":42,"column":13},"generated":{"line":1,"column":775}},{"source":"js/app.js","name":"change","original":{"line":42,"column":17},"generated":{"line":1,"column":787}},{"source":"js/app.js","name":"type","original":{"line":42,"column":24},"generated":{"line":1,"column":789}},{"source":"js/app.js","name":"deleteRecipe","original":{"line":43,"column":12},"generated":{"line":1,"column":795}},{"source":"js/app.js","name":"doc","original":{"line":43,"column":25},"generated":{"line":1,"column":797}},{"source":"js/app.js","name":"id","original":{"line":43,"column":29},"generated":{"line":1,"column":799}},{"source":"js/app.js","name":"form","original":{"line":61,"column":0},"generated":{"line":1,"column":807}},{"source":"js/app.js","name":"addEventListener","original":{"line":61,"column":5},"generated":{"line":1,"column":809}},{"source":"js/app.js","original":{"line":61,"column":32},"generated":{"line":1,"column":826}},{"source":"js/app.js","original":{"line":61,"column":32},"generated":{"line":1,"column":835}},{"source":"js/app.js","name":"e","original":{"line":61,"column":32},"generated":{"line":1,"column":844}},{"source":"js/app.js","name":"e","original":{"line":62,"column":4},"generated":{"line":1,"column":847}},{"source":"js/app.js","name":"preventDefault","original":{"line":62,"column":6},"generated":{"line":1,"column":849}},{"source":"js/app.js","name":"now","original":{"line":64,"column":10},"generated":{"line":1,"column":866}},{"source":"js/app.js","name":"now","original":{"line":64,"column":10},"generated":{"line":1,"column":870}},{"source":"js/app.js","original":{"line":64,"column":16},"generated":{"line":1,"column":872}},{"source":"js/app.js","name":"Date","original":{"line":64,"column":20},"generated":{"line":1,"column":876}},{"source":"js/app.js","name":"recipe","original":{"line":65,"column":10},"generated":{"line":1,"column":881}},{"source":"js/app.js","original":{"line":65,"column":19},"generated":{"line":1,"column":883}},{"source":"js/app.js","name":"title","original":{"line":66,"column":8},"generated":{"line":1,"column":884}},{"source":"js/app.js","name":"form","original":{"line":66,"column":15},"generated":{"line":1,"column":890}},{"source":"js/app.js","name":"recipe","original":{"line":66,"column":20},"generated":{"line":1,"column":892}},{"source":"js/app.js","name":"value","original":{"line":66,"column":27},"generated":{"line":1,"column":899}},{"source":"js/app.js","name":"created_at","original":{"line":67,"column":8},"generated":{"line":1,"column":905}},{"source":"js/app.js","name":"firebase","original":{"line":67,"column":20},"generated":{"line":1,"column":916}},{"source":"js/app.js","name":"firestore","original":{"line":67,"column":29},"generated":{"line":1,"column":925}},{"source":"js/app.js","name":"Timestamp","original":{"line":67,"column":39},"generated":{"line":1,"column":935}},{"source":"js/app.js","name":"fromDate","original":{"line":67,"column":49},"generated":{"line":1,"column":945}},{"source":"js/app.js","name":"now","original":{"line":67,"column":58},"generated":{"line":1,"column":954}},{"source":"js/app.js","name":"db","original":{"line":70,"column":4},"generated":{"line":1,"column":958}},{"source":"js/app.js","name":"collection","original":{"line":70,"column":7},"generated":{"line":1,"column":961}},{"source":"js/app.js","name":"add","original":{"line":70,"column":29},"generated":{"line":1,"column":972}},{"source":"js/app.js","name":"add","original":{"line":70,"column":29},"generated":{"line":1,"column":983}},{"source":"js/app.js","name":"recipe","original":{"line":70,"column":33},"generated":{"line":1,"column":987}},{"source":"js/app.js","name":"then","original":{"line":70,"column":41},"generated":{"line":1,"column":990}},{"source":"js/app.js","original":{"line":70,"column":46},"generated":{"line":1,"column":995}},{"source":"js/app.js","name":"console","original":{"line":71,"column":8},"generated":{"line":1,"column":1006}},{"source":"js/app.js","name":"log","original":{"line":71,"column":16},"generated":{"line":1,"column":1014}},{"source":"js/app.js","original":{"line":71,"column":8},"generated":{"line":1,"column":1018}},{"source":"js/app.js","name":"catch","original":{"line":72,"column":7},"generated":{"line":1,"column":1036}},{"source":"js/app.js","original":{"line":72,"column":13},"generated":{"line":1,"column":1042}},{"source":"js/app.js","name":"err","original":{"line":72,"column":13},"generated":{"line":1,"column":1051}},{"source":"js/app.js","name":"console","original":{"line":73,"column":8},"generated":{"line":1,"column":1054}},{"source":"js/app.js","name":"log","original":{"line":73,"column":16},"generated":{"line":1,"column":1062}},{"source":"js/app.js","name":"err","original":{"line":73,"column":20},"generated":{"line":1,"column":1066}},{"source":"js/app.js","name":"list","original":{"line":79,"column":0},"generated":{"line":1,"column":1073}},{"source":"js/app.js","name":"addEventListener","original":{"line":79,"column":5},"generated":{"line":1,"column":1075}},{"source":"js/app.js","original":{"line":79,"column":31},"generated":{"line":1,"column":1092}},{"source":"js/app.js","original":{"line":79,"column":31},"generated":{"line":1,"column":1100}},{"source":"js/app.js","name":"e","original":{"line":79,"column":31},"generated":{"line":1,"column":1109}},{"source":"js/app.js","name":"e","original":{"line":81,"column":8},"generated":{"line":1,"column":1112}},{"source":"js/app.js","name":"console","original":{"line":80,"column":4},"generated":{"line":1,"column":1115}},{"source":"js/app.js","name":"log","original":{"line":80,"column":12},"generated":{"line":1,"column":1123}},{"source":"js/app.js","name":"e","original":{"line":80,"column":16},"generated":{"line":1,"column":1127}},{"source":"js/app.js","original":{"line":81,"column":4},"generated":{"line":1,"column":1130}},{"source":"js/app.js","name":"e","original":{"line":81,"column":8},"generated":{"line":1,"column":1141}},{"source":"js/app.js","name":"target","original":{"line":81,"column":10},"generated":{"line":1,"column":1143}},{"source":"js/app.js","name":"tagName","original":{"line":81,"column":17},"generated":{"line":1,"column":1150}},{"source":"js/app.js","original":{"line":81,"column":39},"generated":{"line":1,"column":1158}},{"source":"js/app.js","name":"id","original":{"line":82,"column":14},"generated":{"line":1,"column":1159}},{"source":"js/app.js","name":"id","original":{"line":82,"column":14},"generated":{"line":1,"column":1163}},{"source":"js/app.js","name":"e","original":{"line":82,"column":19},"generated":{"line":1,"column":1165}},{"source":"js/app.js","name":"target","original":{"line":82,"column":21},"generated":{"line":1,"column":1167}},{"source":"js/app.js","name":"parentElement","original":{"line":82,"column":28},"generated":{"line":1,"column":1174}},{"source":"js/app.js","name":"getAttribute","original":{"line":82,"column":42},"generated":{"line":1,"column":1188}},{"source":"js/app.js","original":{"line":82,"column":8},"generated":{"line":1,"column":1201}},{"source":"js/app.js","name":"console","original":{"line":83,"column":8},"generated":{"line":1,"column":1212}},{"source":"js/app.js","name":"log","original":{"line":83,"column":16},"generated":{"line":1,"column":1220}},{"source":"js/app.js","name":"id","original":{"line":83,"column":20},"generated":{"line":1,"column":1224}},{"source":"js/app.js","name":"db","original":{"line":84,"column":8},"generated":{"line":1,"column":1227}},{"source":"js/app.js","name":"collection","original":{"line":84,"column":11},"generated":{"line":1,"column":1230}},{"source":"js/app.js","name":"doc","original":{"line":84,"column":33},"generated":{"line":1,"column":1241}},{"source":"js/app.js","name":"doc","original":{"line":84,"column":33},"generated":{"line":1,"column":1252}},{"source":"js/app.js","name":"id","original":{"line":84,"column":37},"generated":{"line":1,"column":1256}},{"source":"js/app.js","name":"delete","original":{"line":84,"column":41},"generated":{"line":1,"column":1259}},{"source":"js/app.js","name":"then","original":{"line":84,"column":50},"generated":{"line":1,"column":1268}},{"source":"js/app.js","original":{"line":84,"column":55},"generated":{"line":1,"column":1273}},{"source":"js/app.js","name":"console","original":{"line":85,"column":12},"generated":{"line":1,"column":1284}},{"source":"js/app.js","name":"log","original":{"line":85,"column":20},"generated":{"line":1,"column":1292}},{"source":"js/app.js","original":{"line":85,"column":12},"generated":{"line":1,"column":1296}},{"source":"js/app.js","name":"stopButton","original":{"line":93,"column":0},"generated":{"line":1,"column":1318}},{"source":"js/app.js","name":"addEventListener","original":{"line":93,"column":11},"generated":{"line":1,"column":1320}},{"source":"js/app.js","original":{"line":93,"column":37},"generated":{"line":1,"column":1337}},{"source":"js/app.js","original":{"line":93,"column":37},"generated":{"line":1,"column":1345}},{"source":"js/app.js","name":"stopLive","original":{"line":94,"column":4},"generated":{"line":1,"column":1356}},{"source":"js/app.js","name":"console","original":{"line":95,"column":4},"generated":{"line":1,"column":1360}},{"source":"js/app.js","name":"log","original":{"line":95,"column":12},"generated":{"line":1,"column":1368}},{"source":"js/app.js","original":{"line":95,"column":4},"generated":{"line":1,"column":1372}}],"sources":{"js/app.js":"const moment = require('moment'); //grab momentJS\n\nconst list = document.querySelector(`ul`);\nconst form = document.querySelector(`form`);\nconst stopButton = document.querySelector(`.stop-live`);\n\nconst addRecipe = (recipe, id) => {\n    let time = moment(recipe.created_at.toDate()).format('MMMM Do YYYY, h:mm:ss a');\n    let html = `\n        <li data-id=\"${id}\">\n            <div>\n                ${recipe.title}\n            </div>\n            <div>Created on ${time}</div>\n            <button class=\"btn btn-danger btn-sm my-2\">Delete Item</button>\n        </li>\n    `;\n\n    list.innerHTML += html;\n    \n};\n\nconst deleteRecipe = (id) => {\n    const recipes = document.querySelectorAll(`li`);\n    recipes.forEach(recipe => {\n        if (recipe.getAttribute(`data-id`) === id) {\n            recipe.remove();\n        }\n    });\n}\n\n//Reference db from firebase script in index.html:\n//Get documents (live):\nconst stopLive = db.collection(`recipes`).onSnapshot(snapshot => {\n    console.log(snapshot.docChanges());\n    snapshot.docChanges().forEach(change => {\n        const doc = change.doc;\n        console.log(doc);\n        if (change.type === `added`) {\n            addRecipe(doc.data(), doc.id);\n        }\n        else if (change.type === `removed`) {\n            deleteRecipe(doc.id);\n        }\n    })\n});\n\n\n//Only retrieves from the start (not live):\n// db.collection(`recipes`).get()//returns promise\n//     .then((snapshot) => {\n//         //when we have the data, go through each one and log to console:\n//         snapshot.docs.forEach(doc => {\n//             addRecipe(doc.data(), doc.id);\n//         });\n//     }).catch((err) => {\n//         console.log(err);\n//     });\n\n//Add Documents:\nform.addEventListener(`submit`, e => {\n    e.preventDefault();\n\n    const now = new Date();\n    const recipe = {\n        title: form.recipe.value,\n        created_at: firebase.firestore.Timestamp.fromDate(now)\n    };\n\n    db.collection(`recipes`).add(recipe).then(() => {\n        console.log(`recipe added`);\n    }).catch(err => {\n        console.log(err);\n    });\n\n});\n\n//Delete item:\nlist.addEventListener(`click`, e => {\n    console.log(e);\n    if (e.target.tagName === `BUTTON`) {\n        const id = e.target.parentElement.getAttribute(`data-id`);\n        console.log(id);\n        db.collection(`recipes`).doc(id).delete().then(() => {\n            console.log(`recipe delete`);\n        });\n    }\n});\n\n\n//Stop live database changes:\n\nstopButton.addEventListener(`click`, () => {\n    stopLive();\n    console.log(`stop successful`);\n});"},"lineCount":null}},"error":null,"hash":"cd6211f77dc91bc37e44ecb1f02bab91","cacheData":{"env":{}}}